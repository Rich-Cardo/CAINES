{% include 'header.html' %}

{% for usuario in usuarios %}

<form class="form-login m-auto" method="post" action="/update_password" enctype="multipart/form-data" onsubmit="return validateForm()">

    <!-- Este input oculto contiene el tipo de usuario para que sirva el boton Modificar -->
    <input type="hidden" value="{{current_user.id}}" name="txtID" id="txtID">

    <h1 class="h3 mb-3 fw-normal text-center">Editar Contraseña</h1>

    <div class="row" style="margin-bottom: 10px;">
        <label for="txtPassword" class="col-3">Contraseña Actual</label>
        <input id="txtOldPassword" class="form-control col-8" type="password" name="txtOldPassword" minlength="8" required>    
    </div> 

    <div class="row" style="margin-bottom: 10px;">
        <label for="txtPassword" class="col-3">Contraseña nueva</label>
        <input id="txtPassword" class="form-control col-8" type="password" name="txtPassword" minlength="8" required>    
    </div>       

    <div class="row" style="margin-bottom: 10px;">
        <label for="txtPassword2" class="col-3">Confirmar Contraseña</label>
        <input id="txtPassword2" class="form-control col-8" type="password" name="txtPassword2" minlength="8" required>    
    </div>  

    <input type="submit" class="btn btn-success w-100" style="margin-bottom: 5px;" value="Modificar">
    <button class="btn button-login w-100" style="background-color: brown;" onclick="cancelar()">Cancelar</button>

</form>

<script>

    function validateForm() {

        var password = document.getElementById("txtPassword").value;
        var confirmPassword = document.getElementById("txtPassword2").value;

        if (password !== confirmPassword) {
            alert("Las contraseñas no coinciden.");
            return false; // Evita que se envíe el formulario
        }
        return true; // Permite el envío del formulario si las contraseñas coinciden
    }

    function cancelar() {
            // Función JavaScript opcional para realizar alguna acción al cancelar
            // Por ejemplo, redireccionar a otra página
            window.location.href = "/menu";
    }

</script>


{% endfor %}
{% include 'footer.html' %}